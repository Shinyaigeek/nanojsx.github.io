<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#ff4e6a" />
    <title>Nano JSX &bull; Lightweight 1KB JSX library</title>
    <meta
      name="description"
      content="Designed to build ultra fast Multi-Page Apps (MPAs), using isomorphic JavaScript. Written in TypeScript. Perfect for your next PWA. Smaller than svelte."
    />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="stylesheet" href="/css/style.css?ver=0.0.3" />
    <link rel="prefetch" href="/docs.html" as="document" />
  </head>
  <body>
    <div id="root">
      <header>
        <div class="is-center">
          <picture>
            <source srcset="/img/logo.webp" type="image/webp" />
            <source srcset="/img/logo.png" type="image/jpeg" />
            <img
              id="logo"
              width="603"
              height="228"
              src="/img/logo.png"
              alt="nano jsx logo"
            />
          </picture>
        </div>
        <h2 id="subtitle" class="is-center">Lightweight 1KB JSX library</h2>
        <p id="tags" class="is-center has-color-gray">
          TypeScript • Ultra Lightweight • SSR First
        </p>
        <ul id="home-navigation" class="is-center">
          <li><a href="/docs.html">Documentation</a></li>
        </ul>
      </header>

      <section>
        <div class="benefits">
          <div class="benefit">
            <h2 class="benefit-title">No Virtual Dom</h2>
            <p class="benefit-text">
              Just pure and fast JavaScript rendering.
            </p>
          </div>
          <div class="benefit">
            <h2 class="benefit-title">SSR First Approach</h2>
            <p class="benefit-text">Designed to run on nodejs.</p>
          </div>
          <div class="benefit">
            <h2 class="benefit-title">Partial Hydration</h2>
            <p class="benefit-text">
              Hydrate only the parts you really need.
            </p>
          </div>
          <div class="benefit">
            <h2 class="benefit-title">Ultra Lightweight</h2>
            <p class="benefit-text">
              Generates even smaller bundles than svelte.
            </p>
          </div>
        </div>
      </section>

      <section class="is-full-width has-background-light">
        <div class="is-container-big">
          <div class="code-example code-example-tabs">
            <div class="code-highlight">
              <div id="code-style-switcher">
                <p data-tab="counterJSX" id="show-jsx" class="is-active">JSX</p>
                <p data-tab="counterJavaScript" id="show-javascript">
                  JavaScript
                </p>
                <p data-tab="counterTaggedTemplates" id="show-tagged-templates">
                  Tagged Templates
                </p>
              </div>
              <pre
                class="has-no-border-radius-top-left has-no-margin-top"
              ><code id="counterJSX" class="language-tsx">loading...</code></pre>
              <pre
                class="has-no-border-radius-top-left has-no-margin-top is-hidden"
              ><code id="counterJavaScript" class="language-tsx">loading...</code></pre>
              <pre
                class="has-no-border-radius-top-left has-no-margin-top is-hidden"
              ><code id="counterTaggedTemplates" class="language-tsx ">loading...</code></pre>
            </div>

            <div class="code-result">
              <div id="counter-value">Counter: 0</div>
              <button id="button-increment">Increment</button>
              <button id="button-decrement">Decrement</button>

              <script>
                let counterValue = 0
                const valueElement = document.getElementById('counter-value')

                const setValue = newValue => {
                  counterValue += newValue
                  valueElement.innerHTML = `Counter: ${counterValue}`
                }
                const buttonI = document
                  .getElementById('button-increment')
                  .addEventListener('click', () => setValue(1))
                const buttonD = document
                  .getElementById('button-decrement')
                  .addEventListener('click', () => setValue(-1))
              </script>
            </div>
          </div>
        </div>
      </section>

      <style>
        #code-style-switcher {
          background-color: #1a1d2a;
          border-radius: 8px 8px 0px 0px;
          display: inline-flex;
          margin-bottom: -1px;
        }
        #code-style-switcher p {
          font-size: 18px;
          cursor: pointer;
          color: white;
          padding: 16px 16px;
          margin: 0;
          border-radius: inherit;
        }
        #code-style-switcher p:hover {
          background-color: #0f111b;
        }
        #code-style-switcher p.is-active {
          background-color: #272a36;
        }
        /* mobile-only */
        @media only screen and (max-width: 420px) {
          #code-style-switcher p {
            font-size: 16px;
            padding: 12px 12px;
          }
        }
      </style>

      <script>
        const styleSwitcher = document.getElementById('code-style-switcher')
        const c = styleSwitcher.children
        for (i = 0; i < c.length; i++) {
          c[i].addEventListener('click', function() {
            const attr = this.getAttribute('data-tab')
            const tabs = [
              'counterJSX',
              'counterJavaScript',
              'counterTaggedTemplates'
            ]

            for (i = 0; i < c.length; i++) {
              c[i].classList.remove('is-active')
            }
            this.classList.add('is-active')

            tabs.forEach(t => {
              const tab = document.getElementById(t)
              if (tab.id === attr)
                tab.parentElement.classList.remove('is-hidden')
              else tab.parentElement.classList.add('is-hidden')
            })
          })
        }
      </script>

      <section>
        <h2>Why</h2>
        <p>
          Well, in the past, I did a lot of websites using Isomorphic React
          (Pre-Rendering on the Server and Hydrating on the client). Once the
          website did load all scripts, it was very fast (not so much on mobile
          though). But the scripts where always way too big.
        </p>
        <p>
          Nowadays, I prefer to Pre-Render the JSX on the server and only
          Hydrate the parts that are really needed. The client now only gets few
          kilobytes and uses much less CPU.
        </p>
        <p>
          Of course with this approach, the client does not have a router and
          must thus fetch each new site on navigating to it. But this is not
          really a problem since the static html is usually very small and we
          can easily prefetch pages using
          <code class="is-code">
            &lt;link rel="prefetch" href="/about.html" as="document"&gt;</code
          >
          on page load or on hovering over a link.
        </p>
      </section>

      <section class="is-full-width has-background-light">
        <div class="is-container">
          <h2>Server Side Rendering</h2>
          <div class="code-example">
            <div class="code-highlight">
              <pre><code id="ssr" class="language-tsx">loading...</code></pre>
            </div>
          </div>
        </div>
      </section>

      <footer class="is-full-width">
        <div class="is-container is-center">
          <div style="margin-bottom:16px;">
            <a style="color:black;" href="https://github.com/nanojsx/nano"
              >https://github.com/nanojsx/nano</a
            >
          </div>
          <div>
            <a
              class="github-button"
              href="https://github.com/yandeu"
              data-color-scheme="no-preference: dark; light: dark; dark: dark;"
              data-size="large"
              data-show-count="true"
              aria-label="Follow @yandeu on GitHub"
              >Follow @yandeu</a
            >
            <a
              class="github-button"
              href="https://github.com/nanojsx/nano"
              data-color-scheme="no-preference: dark; light: dark; dark: dark;"
              data-icon="octicon-star"
              data-size="large"
              data-show-count="true"
              aria-label="Star nanojsx/nano on GitHub"
              >Star</a
            >
            <a
              class="github-button"
              href="https://github.com/sponsors/yandeu"
              data-color-scheme="no-preference: dark; light: dark; dark: dark;"
              data-icon="octicon-heart"
              data-size="large"
              aria-label="Sponsor @yandeu on GitHub"
              >Sponsor</a
            >
          </div>
        </div>
      </footer>
    </div>

    <!-- github corner -->
    <a
      href="https://github.com/nanojsx/nano"
      class="github-corner"
      aria-label="View source on GitHub"
    >
      <svg
        width="80"
        height="80"
        viewBox="0 0 250 250"
        style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);"
        aria-hidden="true"
      >
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor"
          style="transform-origin: 130px 106px;"
          class="octo-arm"
        ></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor"
          class="octo-body"
        ></path>
      </svg>
      <style>
        .github-corner:hover .octo-arm {
          animation: octocat-wave 560ms ease-in-out;
        }
        @keyframes octocat-wave {
          0%,
          100% {
            transform: rotate(0);
          }
          20%,
          60% {
            transform: rotate(-25deg);
          }
          40%,
          80% {
            transform: rotate(10deg);
          }
        }
        @media (max-width: 500px) {
          .github-corner:hover .octo-arm {
            animation: none;
          }
          .github-corner .octo-arm {
            animation: octocat-wave 560ms ease-in-out;
          }
        }
      </style>
    </a>

    <!-- prism scripts -->

    <link rel="stylesheet" href="/css/prism.css?ver=0.0.3" />
    <script src="/js/prism.js?ver=0.0.3"></script>
    <script>
      const code = {
        counterJSX: `import Nano, { Component, Fragment } from 'nano-jsx'
  
class Counter extends Component {
  value = 0

  changeValue(newValue: number) {
    this.value += newValue
    this.update()
  }

  render() {
    return (
      <Fragment>
        <div>Counter: {this.value}</div>
        <button onClick={() => this.changeValue(1)}>Increment</button>
        <button onClick={() => this.changeValue(-1)}>Decrement</button>
      </Fragment>
    )
  }
}
Nano.render(<Counter />, document.getElementById('root'))`,
        counterJavaScript: `import Nano, { Component, Fragment } from 'nano-jsx'

class Counter extends Component {
  value = 0

  changeValue(newValue: number) {
    this.value += newValue
    this.update()
  }

  render() {
    return Nano.h(
      Fragment,
      null,
      Nano.h('div', null, 'Counter: ', this.value),
      Nano.h('button', { onClick: () => this.changeValue(1) }, 'Increment'),
      Nano.h('button', { onClick: () => this.changeValue(-1) }, 'Decrement')
    )
  }
}
Nano.render(Nano.h(Counter, null), document.getElementById('root'))`,
        counterTaggedTemplates: `import Nano, { Component, Fragment, jsx } from 'nano-jsx'

class Counter extends Component {
  value = 0

  changeValue(newValue: number) {
    this.value += newValue
    this.update()
  }

  render() {
    return jsx\`
      <\${Fragment}>
        <div>Counter: \${this.value}</div>
        <button onClick=\${() => this.changeValue(1)}>Increment</button>
        <button onClick=\${() => this.changeValue(-1)}>Decrement</button>
      </\${Fragment}>\`
  }
}

Nano.render(jsx\`<\${Counter} />\`, document.getElementById('root'))`,
        ssr: `import Nano, { Img, Helmet } from 'nano-jsx'

const App = () => (
  <div>
    <Helmet>
      <title>Nano JSX SSR</title>
      <meta name="description" content="Server Side Rendered Nano JSX Application" />
    </Helmet>

    <Helmet footer>
      \<\script src="/scripts.js">\<\/script>
    </Helmet>

    <h1>Hello nano!</h1>
  </div>
)

const app = Nano.renderSSR(<App />)
const { body, head, footer } = Helmet.SSR(app)

const html = \`
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    \${head.join('\\n')}
  </head>
  <body>
    \${body}
    \${footer.join('\\n')}
  \<\/body>
</html>
`
      }
    </script>
    <script>
      window.addEventListener('load', event => {
        for (const [key, value] of Object.entries(code)) {
          document.getElementById(key).innerHTML = Prism.highlight(
            value,
            Prism.languages.tsx
          )
        }
      })
    </script>

    <!-- github buttons -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </body>
</html>
